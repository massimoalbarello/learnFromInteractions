var TDTools=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}([function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CONTEXT="https://www.w3.org/2019/wot/td/v1",t.DEFAULT_CONTEXT_LANGUAGE="en",t.DEFAULT_THING_TYPE="Thing";var o=function(){return function(){this["@context"]=t.DEFAULT_CONTEXT,this["@type"]=t.DEFAULT_THING_TYPE,this.security=[],this.properties={},this.actions={},this.events={},this.links=[]}}();t.default=o;var a=function(){return function(){}}();t.ExpectedResponse=a;var i=function(){return function(e,t){this.href=e,t&&(this.contentType=t)}}();t.Form=i;var s=function(){return function(){}}();t.BaseSchema=s;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s);t.ThingProperty=u;var p=function(){return function(){}}();t.ThingAction=p;var l=function(){return function(){}}();t.ThingEvent=l},function(e,t,r){"use strict";function n(e){var t=JSON.parse(e);return console.log("NO TD MODIFICATIONS DONE YET!!!!!"),t}function o(e){var t=JSON.parse(e);if(null!=t.base&&(t.uris=[],t.uris.push(t.base),delete t.base),null!=t.interactions&&Array.isArray(t.interactions)){for(var r=0,n=t.interactions;r<n.length;r++){var o=n[r];null!=o["@type"]&&Array.isArray(o["@type"])&&(o["@type"].indexOf("Property")>=0&&(null==t.properties&&(t.properties=[]),t.properties.push(o),null!=o.outputData&&null!=o.outputData.valueType&&(o.valueType=o.outputData.valueType,delete o.outputData),a(t,o)),o["@type"].indexOf("Action")>=0&&(null==t.actions&&(t.actions=[]),t.actions.push(o),a(t,o)),o["@type"].indexOf("Event")>=0&&(null==t.events&&(t.events=[]),t.events.push(o),null!=o.outputData&&null!=o.outputData.valueType&&(o.valueType=o.outputData.valueType,delete o.outputData),a(t,o)))}delete t.interactions}return t}function a(e,t){if(null!=t.links&&Array.isArray(t.links)){for(var r=0,n=t.links;r<n.length;r++){var o=n[r];null==t.hrefs&&(t.hrefs=[]),t.hrefs.push(o.href),null==e.encodings&&(e.encodings=[]),e.encodings.indexOf(o.mediaType)<0&&e.encodings.push(o.mediaType)}delete t.links}}function i(e){var t=JSON.parse(e);if(null!=t.base&&(t.uris=[],t.uris.push(t.base),delete t.base),null!=t.interaction&&Array.isArray(t.interaction)){for(var r=0,n=t.interaction;r<n.length;r++){var o=n[r];null!=o["@type"]&&Array.isArray(o["@type"])&&(o["@type"].indexOf("Property")>=0&&(null==t.properties&&(t.properties=[]),t.properties.push(o),null!=o.outputData&&(o.valueType=o.outputData,delete o.outputData),s(t,o)),o["@type"].indexOf("Action")>=0&&(null==t.actions&&(t.actions=[]),t.actions.push(o),null!=o.outputData&&null!=o.outputData.type&&(o.outputData.valueType={},o.outputData.valueType.type=o.outputData.type,delete o.outputData.type),null!=o.inputData&&null!=o.inputData.type&&(o.inputData.valueType={},o.inputData.valueType.type=o.inputData.type,delete o.inputData.type),s(t,o)),o["@type"].indexOf("Event")>=0&&(null==t.events&&(t.events=[]),t.events.push(o),null!=o.outputData&&(o.valueType=o.outputData,delete o.outputData),s(t,o)))}delete t.interaction}return t}function s(e,t){if(null!=t.link&&Array.isArray(t.link)){for(var r=0,n=t.link;r<n.length;r++){var o=n[r];null==t.hrefs&&(t.hrefs=[]),t.hrefs.push(o.href),null==e.encodings&&(e.encodings=[]),e.encodings.indexOf(o.mediaType)<0&&e.encodings.push(o.mediaType)}delete t.links}}Object.defineProperty(t,"__esModule",{value:!0}),t.transformTDV1StringToV2String=n,t.transformTDV1ObjToV2Obj=function(e){return n(JSON.stringify(e))},t.transformTDV2StringToV1String=o,t.transformTDV2ObjToV1Obj=function(e){return o(JSON.stringify(e))},t.transformTDV3StringToV1String=i,t.transformTDV3ObjToV1Obj=function(e){return i(JSON.stringify(e))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findProtocol=function(e){var t=e.base,r=t.indexOf(":");return t.substring(0,r)},t.findPort=function(e){var t=e.base,r=t.indexOf(":",6),n=t.indexOf("/",r),o=t.substring(r+1,n);return parseInt(o)}},function(e,t,r){!function(t){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,o=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,i={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var o=i.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");return o.path=i.normalizePath(o.path),i.buildURLFromParts(o)}var a=i.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=i.normalizePath(a.path),i.buildURLFromParts(a)):t;var s=i.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var u=n.exec(s.path);s.netLoc=u[1],s.path=u[2]}s.netLoc&&!s.path&&(s.path="/");var p={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(p.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var l=s.path,f=l.substring(0,l.lastIndexOf("/")+1)+a.path;p.path=i.normalizePath(f)}else p.path=s.path,a.params||(p.params=s.params,a.query||(p.query=s.query));return null===p.path&&(p.path=r.alwaysNormalize?i.normalizePath(a.path):a.path),i.buildURLFromParts(p)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(o,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=i}()},function(e,t,r){"use strict";e.exports=(e=>{if("string"!=typeof e)throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return!/^[a-zA-Z]:\\/.test(e)&&/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(e)})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(4),a=r(3);t.parseTD=function(e,t){console.debug("parseTD() parsing\n```\n"+e+"\n```");var r=JSON.parse(e.replace(/^\uFEFF/,""));if(void 0===r["@context"])r["@context"]=[n.DEFAULT_CONTEXT];else if(Array.isArray(r["@context"]))-1===(i=r["@context"]).indexOf(n.DEFAULT_CONTEXT)&&i.push(n.DEFAULT_CONTEXT);else if(r["@context"]!==n.DEFAULT_CONTEXT){var i=r["@context"];r["@context"]=[i,n.DEFAULT_CONTEXT]}if(function(e){if(Array.isArray(e["@context"])){for(var t=e["@context"],r=!1,o=0,a=t;o<a.length;o++){var i=a[o];"object"==typeof i&&void 0!==i["@language"]&&(r=!0)}r||t.push({"@language":n.DEFAULT_CONTEXT_LANGUAGE})}}(r),void 0===r["@type"])r["@type"]=n.DEFAULT_THING_TYPE;else if(Array.isArray(r["@type"])){var s=r["@type"];-1===s.indexOf(n.DEFAULT_THING_TYPE)&&s.unshift(n.DEFAULT_THING_TYPE)}else if(r["@type"]!==n.DEFAULT_THING_TYPE){var u=r["@type"];r["@type"]=[n.DEFAULT_THING_TYPE,u]}if(void 0!==r.properties&&r.properties instanceof Object)for(var p in r.properties){var l=r.properties[p];void 0!==l.readOnly&&"boolean"==typeof l.readOnly||(l.readOnly=!1),void 0!==l.writeOnly&&"boolean"==typeof l.writeOnly||(l.writeOnly=!1),void 0!=l.observable&&"boolean"==typeof l.observable||(l.observable=!1)}if(void 0!==r.actions&&r.actions instanceof Object)for(var f in r.actions){var c=r.actions[f];void 0!==c.safe&&"boolean"==typeof c.safe||(c.safe=!1),void 0!==c.idempotent&&"boolean"==typeof c.idempotent||(c.idempotent=!1)}"object"==typeof r.properties&&null!==r.properties||(r.properties={}),"object"==typeof r.actions&&null!==r.actions||(r.actions={}),"object"==typeof r.events&&null!==r.events||(r.events={}),void 0===r.security&&console.warn("parseTD() found no security metadata"),"string"==typeof r.security&&(r.security=[r.security]);var y=[],d={properties:"Property",actions:"Action",events:"Event"};for(var v in d)for(var h in r[v]){if(!r[v][h].hasOwnProperty("forms"))throw new Error(d[v]+" '"+h+"' has no forms field");Array.isArray(r[v][h].forms)||(r[v][h].forms=[r[v][h].forms]);for(var T=0,b=r[v][h].forms;T<b.length;T++){if(!(m=b[T]).hasOwnProperty("href"))throw new Error("Form of "+d[v]+" '"+h+"' has no href field");if(!o(m.href)&&!r.hasOwnProperty("base"))throw new Error("Form of "+d[v]+" '"+h+"' has relative URI while TD has no base field");y.push(m)}}if(r.hasOwnProperty("base")&&(void 0===t||!0===t)){console.log("parseTD() normalizing 'base' into 'forms'");for(var O=0,g=y;O<g.length;O++){var m;(m=g[O]).href.match(/^([a-z0-9\+-\.]+\:).+/i)||(console.debug("parseTDString() applying base '"+r.base+"' to '"+m.href+"'"),m.href=a.buildAbsoluteURL(r.base,m.href))}}return r},t.serializeTD=function(e){var t=JSON.parse(JSON.stringify(e));if(t.security&&0!==t.security.length||(t.securityDefinitions={nosec_sc:{scheme:"nosec"}},t.security=["nosec_sc"]),t.forms&&0===t.forms.length&&delete t.forms,t.properties&&0===Object.keys(t.properties).length)delete t.properties;else if(t.properties)for(var r in t.properties){var n=t.properties[r];void 0!==n.readOnly&&"boolean"==typeof n.readOnly||(n.readOnly=!1),void 0!==n.writeOnly&&"boolean"==typeof n.writeOnly||(n.writeOnly=!1),void 0!=n.observable&&"boolean"==typeof n.observable||(n.observable=!1)}if(t.actions&&0===Object.keys(t.actions).length)delete t.actions;else if(t.actions)for(var o in t.actions){var a=t.actions[o];void 0!==a.idempotent&&"boolean"==typeof a.idempotent||(a.idempotent=!1),void 0!==a.safe&&"boolean"==typeof a.safe||(a.safe=!1)}t.events&&0===Object.keys(t.events).length&&delete t.events,t.links&&0===t.links.length&&delete t.links;var i=JSON.stringify(t);return console.debug("serializeTD() produced\n```\n"+i+"\n```"),i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.tdRepoURI=e}return e.prototype.addNewTD=function(e,t){return""},e.prototype.deleteTD=function(e){return!0},e.prototype.checkIfTDisInRepo=function(e){return""},e.prototype.freeTextSearch=function(e){return[]},e.prototype.tripleSearch=function(e){return[]},e}();t.default=n},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0);t.Thing=o.default;var a=r(6);t.TDRepository=a.default,n(r(0)),n(r(5)),n(r(2)),n(r(1))}]);